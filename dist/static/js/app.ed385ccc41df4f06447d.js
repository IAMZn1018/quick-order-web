webpackJsonp([1],{"4WSK":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("bzuk"),n=i.n(s),r=(i("4WSK"),i("xd7I")),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=i("C7Lr")({name:"App"},o,!1,function(e){i("XKLb")},null,null).exports,l=i("ZWLj"),c={name:"meal",data:function(){return{store:"香村",stores:["古茗"],order:[],remark:null,newItems:[],totalprice:0,ishow:!1,dialogVisible:!1,content:"",num:null,time:new Date,strTime:"12:05",suggestion:""}},created:function(){this.request("香村")},methods:{request:function(e){var t=this,i="http://47.100.226.195:8000/api/"+e;this.$axios({method:"GET",url:i}).then(function(e){for(var i in t.order=e.data.content.r,t.order)for(var s in t.order[i])t.order[i][s].isRed=!1})},sendOrder:function(){var e=this,t=new URLSearchParams;t.append("content",this.content),t.append("num",this.num),t.append("strTime",this.strTime),t.append("remark",this.remark),t.append("totalprice",this.totalprice),this.$axios({method:"POST",url:"http://47.100.226.195:8000/api/order",data:t}).then(function(t){console.log(t.data),200==t.data.code?e.$message({message:"发送成功",type:"success"}):200==t.data.code&&e.$message({message:"发送失败",type:"error"})})},toggle:function(e){e.isRed=!e.isRed,e.isRed?this.newItems.push({name:e.name,price:e.price}):this.newItems=this.newItems.filter(function(t){return t.name!=e.name});for(var t=0,i=0;i<this.newItems.length;i++)t+=this.newItems[i].price;this.totalprice=t,0==this.totalprice?this.ishow=!1:this.ishow=!0,this.createOrder()},createOrder:function(){for(var e="",t=0;t<this.newItems.length;t++)e+=this.newItems[t].name+"，";e=e.substring(0,e.length-1),this.content=e},deleteItem:function(e){for(var t in this.totalprice-=e.price,this.newItems=this.newItems.filter(function(t){return t.name!=e.name}),0==this.totalprice&&(this.ishow=!1),this.order)for(var i in this.order[t])if(this.order[t][i].name==e.name)return void(this.order[t][i].isRed=!this.order[t][i].isRed)},changeTime:function(){if(""==this.time)this.strTime="12:00";else{var e=String(this.time.getHours()),t=String(this.time.getMinutes());1==t.length&&(t="0"+t),this.strTime=e+":"+t}console.log(this.strTime)},choose_store:function(e){this.store=e,this.request(this.store)},sendSuggestion:function(){var e=this,t=this.suggestion;if(t.length<5)this.$message({message:"意见过短",type:"warning"});else{var i=new URLSearchParams;i.append("suggestion",t),console.log(t),this.$axios({method:"POST",url:"http://47.100.226.195:8000/api/suggestion",data:i}).then(function(t){console.log(t.data),200==t.data.code?(e.$message({message:"发送成功",type:"success"}),e.suggestion=""):200==t.data.code&&e.$message({message:"发送失败",type:"error"})})}}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-col",{staticStyle:{"text-align":"left"},attrs:{span:12}},[i("el-dropdown",[i("span",{staticClass:"el-dropdown-link"},[e._v("\n            下拉菜单"),i("i",{staticClass:"el-icon-arrow-down el-icon--left"})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.stores,function(t){return i("el-dropdown-item",{key:t.id,nativeOn:{click:function(i){return e.choose_store(t)}}},[e._v(e._s(t))])}),1)],1)],1),e._v(" "),i("div",{staticClass:"order"},e._l(e.order,function(t,s){return i("ul",{key:t.id,staticClass:"order-list"},[i("b",[e._v(e._s(s)),i("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),e._l(t,function(t){return i("li",{key:t.id,class:{isred:t.isRed},on:{click:function(i){return e.toggle(t)}}},[i("span",[e._v(e._s(t.name))]),e._v("   "+e._s(t.price)+"元")])})],2)}),0),e._v(" "),i("div",{staticClass:"tip"},[i("ul",{staticClass:"order-list-pay"},e._l(e.newItems,function(t){return i("li",{key:t.id,on:{click:function(i){return e.deleteItem(t)}}},[e._v(e._s(t.name)+"  "+e._s(t.price)+"元")])}),0),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.ishow,expression:"ishow"}],staticClass:"total",attrs:{id:"total"}},[i("el-input",{staticStyle:{width:"30%","margin-right":"3%"},attrs:{type:"text",maxlength:2,placeholder:"人数"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),e._v(" "),i("el-time-picker",{staticStyle:{width:"67%"},attrs:{"picker-options":{selectableRange:"10:00:00 - 23:00:00"},placeholder:"到店时间"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),i("div",{staticStyle:{height:"10px",width:"100%"}}),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注信息"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),e._v(" "),i("div",{staticStyle:{height:"10px",width:"100%"}}),e._v(" "),i("el-button",{attrs:{type:"normal",size:"small"},on:{click:function(t){e.dialogVisible=!0,e.changeTime()}}},[e._v("生成订单")]),e._v(" "),i("span",[e._v("totalPrice:"+e._s(e.totalprice)+"元")])],1),e._v(" "),i("el-dialog",{attrs:{title:"订单确认",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("p",[e._v("订单："+e._s(e.content))]),e._v(" "),i("p",[e._v("人数："+e._s(e.num))]),e._v(" "),i("p",[e._v("到店时间："+e._s(e.strTime))]),e._v(" "),i("p",[e._v("备注："+e._s(e.remark))]),e._v(" "),i("span",[e._v("总计："+e._s(e.totalprice)+"元")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1,e.sendOrder()}}},[e._v("发 送")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)])],1),e._v(" "),i("footer",[i("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",placeholder:"意见和建议"},model:{value:e.suggestion,callback:function(t){e.suggestion=t},expression:"suggestion"}}),e._v(" "),i("el-button",{staticStyle:{width:"8%"},attrs:{plain:!0},on:{click:function(t){return e.sendSuggestion()}}},[e._v("发 送")])],1)],1)},staticRenderFns:[]};var u=i("C7Lr")(c,d,!1,function(e){i("kPiR")},"data-v-d7d69c08",null).exports;r.default.use(l.a);var p=new l.a({routes:[{path:"/",name:"HelloWorld",component:u}]}),h=i("84iU"),m=i.n(h);m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.default.prototype.$axios=m.a,r.default.config.productionTip=!1,r.default.use(n.a),new r.default({el:"#app",router:p,components:{App:a},template:"<App/>"})},XKLb:function(e,t){},kPiR:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ed385ccc41df4f06447d.js.map